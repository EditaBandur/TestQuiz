<template>
  <div>
    <h1>CEFR Level Quiz</h1>
    <div v-if="currentQuestion">
      <div v-if="showQuestion">
        <h2>{{ currentQuestion.question }}</h2>
        <div v-for="(option, index) in currentOptions" :key="index">
          <label>
            <input type="radio" :value="index" v-model="selectedOption" />
            {{ option }}
          </label>
        </div>
        <button @click="submitAnswer">Submit</button>
      </div>
      <div v-else>
        <h2>Your CEFR Level: {{ cefrLevel }}</h2>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      questions: [
        {
          question: 'Which of the following is a present simple sentence?',
          options: [
            'He is eating dinner.',
            'She eats dinner every day.',
            'I will eat dinner later.',
            'They were eating dinner.'
          ],
          correctAnswer: 1
        },
        {
          question: 'What is the past participle of the verb "swim"?',
          options: ['Swim', 'Swum', 'Swam', 'Swimming'],
          correctAnswer: 1
        },
        {
          question: 'Choose the correct sentence:',
          options: [
            'She is gone to the store.',
            'She has went to the store.',
            'She went to the store.',
            'She have been to the store.'
          ],
          correctAnswer: 2
        },
        {
          question: 'Which word is a synonym for "happy"?',
          options: ['Sad', 'Angry', 'Joyful', 'Tired'],
          correctAnswer: 2
        },
        {
          question: 'What is the past tense of "run"?',
          options: ['Run', 'Ran', 'Runned', 'Running'],
          correctAnswer: 1
        },
        {
          question: 'Choose the correct sentence:',
          options: [
            'I have lived here since five years.',
            'I have been living here for five years.',
            'I am living here for five years.',
            'I living here since five years.'
          ],
          correctAnswer: 1
        },
        {
          question: 'What does the idiom "to hit the books" mean?',
          options: [
            'To throw books at someone.',
            'To read or study intensively.',
            'To buy new books.',
            'To write books.'
          ],
          correctAnswer: 1
        },
        {
          question: 'What is the comparative form of "good"?',
          options: ['Gooder', 'Goodest', 'More good', 'Better'],
          correctAnswer: 3
        },
        {
          question: 'Which of the following is a future tense sentence?',
          options: [
            'He was playing football.',
            'She has finished her homework.',
            'I will finish my work tomorrow.',
            'They have been swimming.'
          ],
          correctAnswer: 2
        },
        {
          question: 'What is the plural form of "child"?',
          options: ['Childs', 'Childes', 'Children', 'Childs\''],
          correctAnswer: 2
        },
        {
          question: 'What does the idiom "to beat around the bush" mean?',
          options: ['To avoid getting to the point', 'To be direct and straightforward', 'To be confused', 'To be indecisive'],
          correctAnswer: 0
        },
        {
          question: 'What is the comparative form of "beautiful"?',
          options: ['Beautifuller', 'Beautifullest', 'More beautiful', 'Better'],
          correctAnswer: 2
        },
        {
          question: 'Which of the following is a gerund?',
          options: ['To walk', 'Walking', 'Walks', 'Walked'],
          correctAnswer: 1
        },
        {
          question: 'What is the superlative form of "bad"?',
          options: ['Badder', 'Baddest', 'More bad', 'Worse'],
          correctAnswer: 1
        },
        {
          question: 'Choose the correct sentence:',
          options: [
            'I have went to the store this morning.',
            'I went to the store this morning.',
            'I will go to the store this morning.',
            'I would go to the store this morning.'
          ],
          correctAnswer: 1
        }
      ],
      currentQuestion: null,
      selectedOption: null,
      score: 0,
      showQuestion: true,
      cefrLevels: {
        0: 'A1', 1: 'A1', 2: 'A1', 3: 'A1', 4: 'A1', 5: 'A1', 6: 'A1', 7: 'A1', 8: 'A1', 9: 'A1', 10: 'A1',
        11: 'A2', 12: 'A2', 13: 'A2', 14: 'A2', 15: 'A2', 16: 'A2',
        17: 'B1', 18: 'B1', 19: 'B1', 20: 'B1', 21: 'B1', 22: 'B1',
        23: 'B2', 24: 'B2', 25: 'B2', 26: 'B2',
        27: 'C1', 28: 'C1', 29: 'C1',
        30: 'C2'
      }
    };
  },
  computed: {
    currentOptions() {
      return this.currentQuestion ? this.currentQuestion.options : [];
    },
    cefrLevel() {
      return this.cefrLevels[this.score];
    }
  },
  mounted() {
    this.startQuiz();
  },
  methods: {
    startQuiz() {
      // Shuffle the questions array
      this.questions = this.shuffleArray(this.questions);
      this.currentQuestion = this.questions[0];
      this.selectedOption = null;
      this.score = 0;
      this.showQuestion = true;
    },
    submitAnswer() {
      if (this.selectedOption !== null && this.selectedOption === this.currentQuestion.correctAnswer) {
        this.score++;
      }
      const currentIndex = this.questions.indexOf(this.currentQuestion);
      if (currentIndex === this.questions.length - 1) {
        this.showQuestion = false;
      } else {
        this.currentQuestion = this.questions[currentIndex + 1];
        this.selectedOption = null;
      }
    },
    shuffleArray(array) {
      // Fisher-Yates shuffle algorithm
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
  }
};
</script>
